root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/career-portal# chmod +x docker-deploy.sh
./docker-deploy.sh
🐳 Starting Docker deployment for Career Portal...
🔨 Building and starting containers...
nginx uses an image, skipping
Building career-portal
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  367.5MB
Step 1/12 : FROM node:20-alpine
20-alpine: Pulling from library/node
fe07684b16b8: Pull complete 
5432aa916e08: Pull complete 
2506673f5536: Pull complete 
98c4889b578e: Pull complete 
Digest: sha256:674181320f4f94582c6182eaa151bf92c6744d478be0f1d12db804b7d59b2d11
Status: Downloaded newer image for node:20-alpine
 ---> bfd94ebedbda
Step 2/12 : WORKDIR /app
 ---> Running in adf4c328930e
 ---> Removed intermediate container adf4c328930e
 ---> 5e8dd9426f13
Step 3/12 : COPY package*.json ./
 ---> d5b996e41abe
Step 4/12 : RUN npm ci --only=production
 ---> Running in 8a7bbf1585c7
npm warn config only Use `--omit=dev` to omit dev dependencies from the install.
,^[   
added 441 packages, and audited 442 packages in 29s

56 packages are looking for funding
  run `npm fund` for details

2 vulnerabilities (1 low, 1 moderate)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.4.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.4.2
npm notice To update run: npm install -g npm@11.4.2
npm notice
 ---> Removed intermediate container 8a7bbf1585c7
 ---> d136a09907eb
Step 5/12 : COPY client ./client
 ---> 831a2dea0cc5
Step 6/12 : COPY server ./server
 ---> 44450b785a34
Step 7/12 : COPY shared ./shared
 ---> c91d2184a272
Step 8/12 : COPY public ./public
 ---> 8f6681c552d5
Step 9/12 : COPY dist ./dist
 ---> 2ed6b0f54746
Step 10/12 : COPY *.ts *.js *.json ./
 ---> 9c27de30f145
Step 11/12 : EXPOSE 5000
 ---> Running in 70a42a6d1291
 ---> Removed intermediate container 70a42a6d1291
 ---> 05a3b3b33070
Step 12/12 : CMD ["node", "dist/index.js"]
 ---> Running in c81b462c0870
 ---> Removed intermediate container c81b462c0870
 ---> 35c89b9116d3
Successfully built 35c89b9116d3
Successfully tagged career-portal_career-portal:latest
Creating network "career-portal_default" with the default driver
Pulling nginx (nginx:alpine)...
alpine: Pulling from library/nginx
f18232174bc9: Pull complete
61ca4f733c80: Pull complete
b464cfdf2a63: Pull complete
d7e507024086: Pull complete
81bd8ed7ec67: Pull complete
197eb75867ef: Pull complete
34a64644b756: Pull complete
39c2ddfd6010: Pull complete
Digest: sha256:65645c7bb6a0661892a8b03b89d0743208a18dd2f3f17a54ef4b76fb8e2f2a10
Status: Downloaded newer image for nginx:alpine
Creating career-portal_career-portal_1 ... 
Creating career-portal_career-portal_1 ... error

ERROR: for career-portal_career-portal_1  Cannot start service career-portal: driver failed programming external connectivity on endpoint career-portal_career-portal_1 (71a6ef4317c13c0425e8d34f67e00216973a8ec7a6411f7dc2fa2c784a5a57cc): failed to bind port 0.0.0.0:80/tcp: Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use

ERROR: for career-portal  Cannot start service career-portal: driver failed programming external connectivity on endpoint career-portal_career-portal_1 (71a6ef4317c13c0425e8d34f67e00216973a8ec7a6411f7dc2fa2c784a5a57cc): failed to bind port 0.0.0.0:80/tcp: Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use
ERROR: Encountered errors while bringing up the project.
⏳ Waiting for services to start...
📊 Container status:
            Name                           Command                State     Ports
---------------------------------------------------------------------------------
career-portal_career-portal_1   docker-entrypoint.sh node  ...   Exit 128        
🧪 Testing deployment...
❌ Health check failed
📋 Container logs:
ERROR: No such service: --tail
✅ Web server responding

🎉 Docker deployment complete!
📋 Access your Career Portal at: http://64.225.6.33

🔧 Management commands:
• View logs: docker-compose logs -f career-portal
• Restart: docker-compose restart
• Stop: docker-compose down
• Update: docker-compose build --no-cache && docker-compose up -d

📊 Check status: docker-compose ps
root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/career-portal# chmod +x docker-debug.sh
./docker-debug.sh
chmod: cannot access 'docker-debug.sh': No such file or directory
-bash: ./docker-debug.sh: No such file or directory
root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/career-portal# chmod +x docker-debug.sh
./docker-debug.sh
Debugging Docker deployment issues...
=== Container Status ===
            Name                           Command                State     Ports
---------------------------------------------------------------------------------
career-portal_career-portal_1   docker-entrypoint.sh node  ...   Exit 128        

=== Container Logs ===
ERROR: No such service: --tail

=== Stop and recreate containers ===
Removing career-portal_career-portal_1 ... done
Removing network career-portal_default
Creating network "career-portal_default" with the default driver
Creating career-portal_career-portal_1 ... 
Creating career-portal_career-portal_1 ... error

ERROR: for career-portal_career-portal_1  Cannot start service career-portal: driver failed programming external connectivity on endpoint career-portal_career-portal_1 (a25d08d9f8bf8ed07bd2a17f7c7e39f5994ba85cce1d0f1a8be2b498def078fb): failed to bind port 0.0.0.0:80/tcp: Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use

ERROR: for career-portal  Cannot start service career-portal: driver failed programming external connectivity on endpoint career-portal_career-portal_1 (a25d08d9f8bf8ed07bd2a17f7c7e39f5994ba85cce1d0f1a8be2b498def078fb): failed to bind port 0.0.0.0:80/tcp: Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use
ERROR: Encountered errors while bringing up the project.

=== Testing direct container access ===
Container not responding

=== Check if containers are running ===
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES

=== Deploying simplified single container ===
DEPRECATED: The legacy builder is deprecated and will be removed in a future release.
            Install the buildx component to build images with BuildKit:
            https://docs.docker.com/go/buildx/

Sending build context to Docker daemon  367.5MB
Step 1/7 : FROM node:20-alpine
 ---> bfd94ebedbda
Step 2/7 : WORKDIR /app
 ---> Using cache
 ---> 5e8dd9426f13
Step 3/7 : COPY . .
 ---> e476c94fb5af
Step 4/7 : RUN npm install
 ---> Running in 4850508867d7
npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is

added 83 packages, and audited 525 packages in 12s

65 packages are looking for funding
  run `npm fund` for details

9 vulnerabilities (1 low, 8 moderate)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
npm notice
npm notice New major version of npm available! 10.8.2 -> 11.4.2
npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.4.2
npm notice To update run: npm install -g npm@11.4.2
npm notice
 ---> Removed intermediate container 4850508867d7
 ---> facf300cba1c
Step 5/7 : RUN npm run build 2>/dev/null || echo "Build not needed"
 ---> Running in e660cffd4733

> rest-express@1.0.0 build
> vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist

vite v5.4.14 building for production...
transforming...
✓ 1867 modules transformed.
rendering chunks...
computing gzip size...
../dist/public/index.html                          1.93 kB │ gzip:   0.81 kB
../dist/public/assets/cropped-logo-BTJp_xEo.png   86.41 kB
../dist/public/assets/index-Dm_e3IT3.css          84.19 kB │ gzip:  13.57 kB
../dist/public/assets/index-BiDWT6-L.js          561.01 kB │ gzip: 166.19 kB
✓ built in 19.73s
 ---> Removed intermediate container e660cffd4733
 ---> 66e9b7805fb4
Step 6/7 : EXPOSE 5000
 ---> Running in 4c312ea90657
 ---> Removed intermediate container 4c312ea90657
 ---> 55edd87ce57e
Step 7/7 : CMD ["node", "server/final-auth-fix.js"]
 ---> Running in 754bc40cfe7c
 ---> Removed intermediate container 754bc40cfe7c
 ---> 3a6c13314d7d
Successfully built 3a6c13314d7d
Successfully tagged career-portal-simple:latest
0303ac3c9285d252e4155722122ad2301deef3ceed78e56220962041bf12887a
docker: Error response from daemon: driver failed programming external connectivity on endpoint career-portal (24d6dedac3b8cf8438580cc5c9aa3b8bf84d831d65807bf6ec714f69dffa8313): failed to bind port 0.0.0.0:80/tcp: Error starting userland proxy: listen tcp4 0.0.0.0:80: bind: address already in use.
=== Testing simple container ===
HTTP/1.1 502 Bad Gateway
Server: nginx/1.26.0 (Ubuntu)
Date: Tue, 24 Jun 2025 03:50:41 GMT
Content-Type: text/html
Content-Length: 166
Connection: keep-alive


=== Final status check ===
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
HTTP/1.1 200 OK
Server: nginx/1.26.0 (Ubuntu)
Date: Tue, 24 Jun 2025 03:50:41 GMT
Content-Type: text/html
Content-Length: 1926
Last-Modified: Mon, 23 Jun 2025 16:23:49 GMT
Connection: keep-alive
ETag: "68597f95-786"
Accept-Ranges: bytes

✅ Server responding
root@ubuntu-s-1vcpu-1gb-nyc3-01:/var/www/career-portal# 