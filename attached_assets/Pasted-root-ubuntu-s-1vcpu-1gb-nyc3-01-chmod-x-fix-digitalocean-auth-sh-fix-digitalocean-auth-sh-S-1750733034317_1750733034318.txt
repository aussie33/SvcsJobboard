root@ubuntu-s-1vcpu-1gb-nyc3-01:~# chmod +x fix-digitalocean-auth.sh
./fix-digitalocean-auth.sh
🚀 Starting DigitalOcean Career Portal Authentication Fix...
📂 Current directory: /var/www/career-portal
🛑 Stopping existing PM2 processes...
[PM2] Applying action deleteProcessId on app [all](ids: [ 0 ])
[PM2] [career-portal](0) ✓
┌────┬───────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name      │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
└────┴───────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
📝 Creating enhanced authentication server...
✅ Authentication server file created
🚀 Starting the authentication server...
[PM2] Starting /var/www/career-portal/server/auth-fix.js in fork_mode (1 instance)
[PM2] Done.
┌────┬──────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name             │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼──────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ career-portal    │ default     │ 1.0.0   │ fork    │ 1318     │ 0s     │ 0    │ online    │ 0%       │ 11.0mb   │ root     │ disabled │
└────┴──────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
⏳ Waiting for server startup...
📊 Checking server status...
┌────┬──────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name             │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼──────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 0  │ career-portal    │ default     │ 1.0.0   │ fork    │ 1318     │ 5s     │ 0    │ online    │ 0%       │ 71.4mb   │ root     │ disabled │
└────┴──────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘

📋 Server logs:
[TAILING] Tailing last 5 lines for [career-portal] process (change the value with --lines option)
/root/.pm2/logs/career-portal-error.log last 5 lines:
0|career-p |     at async Hooks.resolve (node:internal/modules/esm/hooks:304:24) {
0|career-p |   code: 'ERR_MODULE_NOT_FOUND'
0|career-p | }
0|career-p | 
0|career-p | Node.js v20.16.0

/root/.pm2/logs/career-portal-out.log last 5 lines:
0|career-p | Auth check - Session ID: rJs_fY5kDOAYS6n7mqkvdPNb9_nX70ry User ID: undefined
0|career-p | Production auth server running on port 5000
0|career-p | Starting production server with static path: /var/www/career-portal/dist/public
0|career-p | Production server running on port 5000
0|career-p | Static files served from: /var/www/career-portal/dist/public

