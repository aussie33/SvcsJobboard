root@ubuntu-s-1vcpu-2gb-sfo3-01:/var/www/career-portal# # 1. Navigate to app directory
cd /var/www/career-portal

# 2. Check why server crashed
pm2 logs career-portal --lines 10

# 3. Clean restart
pm2 delete all
pm2 start "npx tsx server/index.ts" --name "career-portal" -i 1

# 4. Wait for full startup
sleep 10

# 5. Test if server serves the production HTML with styling
curl http://localhost:5000 | grep "stylesheet"

# 6. Test if CSS is accessible
curl -I http://localhost:5000/assets/index-Dm_e3IT3.css

# 7. Check website
curl -I http://134.199.237.34
[TAILING] Tailing last 10 lines for [career-portal] process (change the value with --lines option)
/root/.pm2/logs/career-portal-error-0.log last 10 lines:
/root/.pm2/logs/career-portal-error-1.log last 10 lines:
1|career-p |         ^
1|career-p | 
1|career-p | Error: Dynamic require of "pg" is not supported
1|career-p |     at file:///var/www/career-portal/dist/index.js:5:9
1|career-p |     at file:///var/www/career-portal/dist/index.js:15:16
1|career-p |     at ModuleJob.run (node:internal/modules/esm/module_job:234:25)
1|career-p |     at async ModuleLoader.import (node:internal/modules/esm/loader:473:24)
1|career-p |     at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:122:5)
1|career-p | 
1|career-p | Node.js v20.18.1

/root/.pm2/logs/career-portal-out-0.log last 10 lines:
0|career-p | requireAuth - No session or userId, returning 401
0|career-p | 1:04:16 AM [express] GET /api/auth/me 401 in 5ms :: {"message":"Unauthorized"}
0|career-p | No status specified and showAllStatuses=false, defaulting to active only
0|career-p | 1:08:18 AM [express] GET /api/jobs 304 in 4ms :: [{"id":1,"title":"Senior Frontend Developer","depar…
0|career-p | requireAuth - Session ID: H3vwMy5mYw4qS4IaNqVENQBoBkbayUyM
0|career-p | requireAuth - Session exists: true
0|career-p | requireAuth - Session userId: undefined
0|career-p | requireAuth - No session or userId, returning 401
0|career-p | 1:08:18 AM [express] GET /api/auth/me 401 in 5ms :: {"message":"Unauthorized"}
0|career-p | 1:08:18 AM [express] GET /api/categories 304 in 1ms :: [{"id":1,"name":"Engineering","description":"…

/root/.pm2/logs/career-portal-out-1.log last 10 lines:
1|career-p | Initialized users: 3
1|career-p | Initialized categories: 30
1|career-p | Initialized jobs: 3
1|career-p | Initialized job tags: 9
1|career-p | 11:43:07 PM [express] serving on port 5000
1|career-p | Initialized users: 3
1|career-p | Initialized categories: 30
1|career-p | Initialized jobs: 3
1|career-p | Initialized job tags: 9
1|career-p | 1:08:41 AM [express] serving on port 5000

